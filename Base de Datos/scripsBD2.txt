CREATE DATABASE ajedrez;
USE ajedrez;

CREATE TABLE hotel(IdHotel int PRIMARY KEY AUTO_INCREMENT, Nombre VARCHAR(100),
Direccion VARCHAR(100), Telefono VARCHAR(20));

CREATE TABLE sala(IdSala int PRIMARY KEY AUTO_INCREMENT, Capacidad int,
Medios VARCHAR(100), FkHotel int, FOREIGN KEY(FkHotel) REFERENCES hotel(IdHotel));

CREATE TABLE pais(IdPais int PRIMARY KEY AUTO_INCREMENT, Nombre VARCHAR(100), NClubes int);

CREATE TABLE personas(IdPersona VARCHAR(8) PRIMARY KEY, Nombre VARCHAR(50),
APaterno VARCHAR(50), AMaterno VARCHAR(50), Direccion VARCHAR(100), Telefono VARCHAR(20),
FkPais int, FOREIGN KEY(FkPais) REFERENCES pais(IdPais));

CREATE TABLE campeonato(FkPersona VARCHAR(8), IdCampeonato int, PRIMARY KEY(FkPersona, IdCampeonato), Nombre VARCHAR(100),
Tipo VARCHAR(100), FOREIGN KEY(FkPersona) REFERENCES personas(IdPersona));

CREATE TABLE hospedaje(IdReserva int PRIMARY KEY AUTO_INCREMENT, FechaEntrada DATE,
FechaSalida DATE, FkHotel int, FkPersona VARCHAR(8), FOREIGN KEY(FkHotel) REFERENCES hotel(IdHotel),
FOREIGN KEY(FkPersona) REFERENCES personas(IdPersona));

CREATE TABLE jugador(IdJugador VARCHAR(8) PRIMARY KEY, Nivel VARCHAR(100), FOREIGN KEY(IdJugador) REFERENCES personas(IdPersona));

CREATE TABLE arbitro(IdArbitro VARCHAR(8) PRIMARY KEY, FOREIGN KEY(IdArbitro) REFERENCES personas(IdPersona));

CREATE TABLE partida(IdPartida VARCHAR(8) PRIMARY KEY, Jornada int, Entrada int,
FkSala int, FkArbitro VARCHAR(8), FOREIGN KEY(FkSala) REFERENCES sala(IdSala),
FOREIGN KEY(FkArbitro) REFERENCES arbitro(IdArbitro));

CREATE TABLE piezas(FkPartida VARCHAR(8), FkJugador VARCHAR(8), Color VARCHAR(50), PRIMARY KEY(FkPartida, FkJugador),
FOREIGN KEY(FkPartida) REFERENCES partida(IdPartida), FOREIGN KEY(FkJugador) REFERENCES jugador(IdJugador));

CREATE TABLE movimientos(FkPartida VARCHAR(8), Numero int, Blancas VARCHAR(100), Negras VARCHAR(100), Cometario VARCHAR(100),
PRIMARY KEY(FkPartida, Numero), FOREIGN KEY(FkPartida) REFERENCES partida(IdPartida));